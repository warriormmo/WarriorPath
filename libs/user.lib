<?php
  require_once('include/commons.inc');

  function usr_updateUser($usr_data, $where = array()){
    global $db_main;
    if (!is_array($where))
      $where = db_pholder(' id = ? ', ($where ? $where : @$usr_data['id']));
    return db_updateRow($db_main, 'users', $usr_data, '', $where);
  }

  function usr_insertUser($usr_data){
    global $db_main;
    $usr_data['reg_date'] = @$usr_data['reg_date'] ? $usr_data['reg_date'] : time();
    return db_insert($db_main, 'users', $usr_data);
  }

  function usr_getUser($usr_data, $where = array()){
    global $db_main;
    $_where = is_array($usr_data) ? $usr_data : array('id' => $usr_data);
    $_where['where'] = $where;
    return db_selectRow($db_main, 'users', '', $_where);
  }

  function usr_deleteUser($usr_data, $where = array()){
    global $db_main;
    $_where = is_string($usr_data) ? $usr_data : db_pholder(' ?a ', $usr_data);
    if (!empty($where)){
      $_where[0] .= $where[0];
      for($i=1;$i<count($where);$i++)
        array_push($_where, $where[$i]);
    }
    return db_deleteRow($db_main, 'users', $_where);
  }
?>